<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tech Gadgets Store</title>
  <!-- Bootstrap CSS CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    :root {
      --primary: #0d9488; /* Teal primary color */
      --primary-dark: #0f766e;
      --primary-light: #5eead4;
      --secondary: #1f2937; /* Dark gray for contrast */
      --background: #f8fafc; /* Light gray background */
      --text: #1f2937;
      --text-muted: #6b7280;
    }

    body {
      padding-top: 80px;
      background-color: var(--background);
      color: var(--text);
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    .navbar {
      background-color: var(--secondary);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .navbar-brand, .nav-link {
      color: #ffffff !important;
      transition: color 0.2s ease;
    }

    .nav-link:hover, .dropdown-item:hover {
      color: var(--primary-light) !important;
      background-color: var(--primary-dark) !important;
    }

    .sidebar {
      max-width: 250px;
      background-color: #ffffff;
      border: none;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    .sidebar h5, .sidebar h6 {
      color: var(--primary);
      font-weight: 600;
    }

    .form-check-label {
      color: var(--text);
      cursor: pointer;
      transition: color 0.2s ease;
    }

    .form-check-input:checked {
      background-color: var(--primary);
      border-color: var(--primary);
    }

    .form-check-input:focus {
      box-shadow: 0 0 0 0.2rem rgba(13, 148, 136, 0.25);
    }

    .price-range label:hover, .form-check-label:hover {
      color: var(--primary);
    }

    .btn-primary {
      background-color: var(--primary);
      border-color: var(--primary);
      transition: background-color 0.2s ease, transform 0.1s ease;
    }

    .btn-primary:hover {
      background-color: var(--primary-dark);
      border-color: var(--primary-dark);
      transform: translateY(-1px);
    }

    .btn-secondary {
      background-color: var(--text-muted);
      border-color: var(--text-muted);
      transition: background-color 0.2s ease, transform 0.1s ease;
    }

    .btn-secondary:hover {
      background-color: #4b5563;
      border-color: #4b5563;
      transform: translateY(-1px);
    }

    .btn-success {
      background-color: var(--primary);
      border-color: var(--primary);
      transition: background-color 0.2s ease, transform 0.1s ease;
    }

    .btn-success:hover {
      background-color: var(--primary-dark);
      border-color: var(--primary-dark);
      transform: translateY(-1px);
    }

    .card {
      border: none;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }

    .card-img-top {
      height: 200px;
      object-fit: contain;
      background-color: #ffffff;
      padding: 1rem;
    }

    .card-title {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text);
    }

    .card-text {
      color: var(--text-muted);
      font-size: 0.95rem;
    }

    .breadcrumb {
      background-color: transparent;
      padding: 0.5rem 0;
    }

    .breadcrumb-item a {
      color: var(--primary);
      text-decoration: none;
    }

    .breadcrumb-item a:hover {
      text-decoration: underline;
    }

    .breadcrumb-item.active {
      color: var(--text-muted);
    }
  </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">Tech Gadgets</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navContent"
      aria-controls="navContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navContent">
      <ul class="navbar-nav me-auto">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Categories
          </a>
          <ul class="dropdown-menu">
            <!-- Electronics Submenu -->
            <li class="dropdown-submenu dropend">
              <a class="dropdown-item dropdown-toggle" href="#">Electronics</a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item category-link" href="#" data-category="Electronics > Smartphones">Smartphones</a></li>
                <li><a class="dropdown-item category-link" href="#" data-category="Electronics > Laptops">Laptops</a></li>
              </ul>
            </li>
            <!-- Accessories Submenu -->
            <li class="dropdown-submenu dropend">
              <a class="dropdown-item dropdown-toggle" href="#">Accessories</a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item category-link" href="#" data-category="Accessories > Headphones">Headphones</a></li>
                <li><a class="dropdown-item category-link" href="#" data-category="Accessories > Chargers">Chargers</a></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Breadcrumb -->
<div class="container">
  <nav aria-label="breadcrumb" class="my-3">
    <ol class="breadcrumb" id="breadcrumb">
      <li class="breadcrumb-item active" aria-current="page">Home</li>
    </ol>
  </nav>
</div>

<!-- Main Content -->
<div class="container">
  <div class="row">
    <!-- Sidebar filters -->
    <aside class="col-md-3 sidebar p-3 mb-4">
      <h5>Filters</h5>

      <!-- Brand Filter -->
      <div class="mb-4">
        <h6>Brand</h6>
        <div class="form-check">
          <input class="form-check-input brand-filter" type="checkbox" value="Apple" id="brandApple">
          <label class="form-check-label" for="brandApple">Apple</label>
        </div>
        <div class="form-check">
          <input class="form-check-input brand-filter" type="checkbox" value="Samsung" id="brandSamsung">
          <label class="form-check-label" for="brandSamsung">Samsung</label>
        </div>
        <div class="form-check">
          <input class="form-check-input brand-filter" type="checkbox" value="Dell" id="brandDell">
          <label class="form-check-label" for="brandDell">Dell</label>
        </div>
        <div class="form-check">
          <input class="form-check-input brand-filter" type="checkbox" value="Google" id="brandGoogle">
          <label class="form-check-label" for="brandGoogle">Google</label>
        </div>
        <div class="form-check">
          <input class="form-check-input brand-filter" type="checkbox" value="Lenovo" id="brandLenovo">
          <label class="form-check-label" for="brandLenovo">Lenovo</label>
        </div>
      </div>

      <!-- Price Range Filter -->
      <div class="mb-4">
        <h6>Price Range</h6>
        <div class="price-range">
          <div class="form-check">
            <input class="form-check-input price-filter" type="radio" name="priceRange" id="priceAll" value="all" checked>
            <label class="form-check-label" for="priceAll">All</label>
          </div>
          <div class="form-check">
            <input class="form-check-input price-filter" type="radio" name="priceRange" id="price1" value="0-500">
            <label class="form-check-label" for="price1">Under $500</label>
          </div>
          <div class="form-check">
            <input class="form-check-input price-filter" type="radio" name="priceRange" id="price2" value="501-1000">
            <label class="form-check-label" for="price2">$501 - $1000</label>
          </div>
          <div class="form-check">
            <input class="form-check-input price-filter" type="radio" name="priceRange" id="price3" value="1001-2000">
            <label class="form-check-label" for="price3">$1001 - $2000</label>
          </div>
          <div class="form-check">
            <input class="form-check-input price-filter" type="radio" name="priceRange" id="price4" value="2001-10000">
            <label class="form-check-label" for="price4">Above $2000</label>
          </div>
        </div>
      </div>

      <!-- Filter Buttons -->
      <div class="d-flex gap-2">
        <button class="btn btn-primary btn-sm" id="applyFilters">Apply Filters</button>
        <button class="btn btn-secondary btn-sm" id="resetFilters">Reset Filters</button>
      </div>
    </aside>

    <!-- Products listing -->
    <section class="col-md-9">
      <div class="row row-cols-1 row-cols-md-3 g-4" id="product-list">
        <!-- Products will be dynamically inserted here -->
      </div>
    </section>
  </div>
</div>

<!-- Bootstrap JS Bundle (Popper + Bootstrap JS) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
  // Sample product data array
  const products = [
    {
      id: 1,
      name: 'iPhone 15 Pro',
      category: 'Electronics > Smartphones',
      brand: 'Apple',
      price: 999,
      img: 'public/Iphone.jpeg'
    },
    {
      id: 2,
      name: 'Galaxy S24 Ultra',
      category: 'Electronics > Smartphones',
      brand: 'Samsung',
      price: 1199,
      img: 'public/Galaxy S24.jpeg'
    },
    {
      id: 3,
      name: 'Google Pixel 8 Pro',
      category: 'Electronics > Smartphones',
      brand: 'Google',
      price: 999,
      img: 'public/google.jpeg'
    },
    {
      id: 4,
      name: 'MacBook Pro 16-inch',
      category: 'Electronics > Laptops',
      brand: 'Apple',
      price: 2499,
      img: 'public/mb.jpeg'
    },
    {
      id: 5,
      name: 'Dell XPS 15',
      category: 'Electronics > Laptops',
      brand: 'Dell',
      price: 1799,
      img: 'public/dell.jpeg'
    },
    {
      id: 6,
      name: 'Lenovo ThinkPad X1 Carbon',
      category: 'Electronics > Laptops',
      brand: 'Lenovo',
      price: 1499,
      img: 'public/lenovo.jpeg'
    },
    {
      id: 7,
      name: 'Samsung Galaxy Book2 Pro',
      category: 'Electronics > Laptops',
      brand: 'Samsung',
      price: 1299,
      img: 'public/sg.jpeg'
    }
  ];

  // Selected category and filters state
  let selectedCategory = null;
  let selectedBrands = null; // null means no brand filter applied
  let selectedPriceRange = null; // null means no price filter applied
  let pendingBrands = new Set();
  let pendingPriceRange = 'all';

  // Elements
  const productListEl = document.getElementById('product-list');
  const breadcrumbEl = document.getElementById('breadcrumb');
  const applyFiltersBtn = document.getElementById('applyFilters');
  const resetFiltersBtn = document.getElementById('resetFilters');

  // Utility: update breadcrumb
  function updateBreadcrumb() {
    breadcrumbEl.innerHTML = '';
    const homeCrumb = document.createElement('li');
    homeCrumb.className = 'breadcrumb-item';
    const homeLink = document.createElement('a');
    homeLink.href = '#';
    homeLink.textContent = 'Home';
    homeLink.addEventListener('click', e => {
      e.preventDefault();
      selectedCategory = null;
      updateBreadcrumb();
      renderProducts();
    });
    homeCrumb.appendChild(homeLink);
    breadcrumbEl.appendChild(homeCrumb);

    if (selectedCategory) {
      const parts = selectedCategory.split(' > ');
      parts.forEach((part, i) => {
        const crumb = document.createElement('li');
        crumb.className = i === parts.length - 1 ? 'breadcrumb-item active' : 'breadcrumb-item';
        if (i === parts.length - 1) {
          crumb.setAttribute('aria-current', 'page');
          crumb.textContent = part;
        } else {
          const link = document.createElement('a');
          link.href = '#';
          link.textContent = part;
          link.addEventListener('click', e => {
            e.preventDefault();
            selectedCategory = parts.slice(0, i + 1).join(' > ');
            updateBreadcrumb();
            renderProducts();
          });
          crumb.appendChild(link);
        }
        breadcrumbEl.appendChild(crumb);
      });
    } else {
      const activeCrumb = document.createElement('li');
      activeCrumb.className = 'breadcrumb-item active';
      activeCrumb.setAttribute('aria-current', 'page');
      activeCrumb.textContent = 'All Products';
      breadcrumbEl.appendChild(activeCrumb);
    }
  }

  // Render products based on filters and category
  function renderProducts() {
    productListEl.innerHTML = '';

    // Filter products by category if selected
    let filteredProducts = products.filter(p => {
      if (selectedCategory) {
        return p.category.startsWith(selectedCategory);
      }
      return true;
    });

    // Filter by brand if applied
    if (selectedBrands) {
      filteredProducts = filteredProducts.filter(p => selectedBrands.has(p.brand));
    }

    // Filter by price range if applied
    if (selectedPriceRange) {
      const [min, max] = selectedPriceRange.split('-').map(Number);
      filteredProducts = filteredProducts.filter(p => {
        if (max) return p.price >= min && p.price <= max;
        return p.price >= min;
      });
    }

    if (filteredProducts.length === 0) {
      productListEl.innerHTML = '<p class="text-muted">No products match your filters.</p>';
      return;
    }

    // Create cards for each filtered product
    filteredProducts.forEach(p => {
      const col = document.createElement('div');
      col.className = 'col';

      const card = document.createElement('div');
      card.className = 'card h-100';

      const img = document.createElement('img');
      img.src = p.img;
      img.alt = p.name;
      img.className = 'card-img-top';

      const cardBody = document.createElement('div');
      cardBody.className = 'card-body';

      const cardTitle = document.createElement('h5');
      cardTitle.className = 'card-title';
      cardTitle.textContent = p.name;

      const cardText = document.createElement('p');
      cardText.className = 'card-text';
      cardText.textContent = `${p.brand} - $${p.price}`;

      const addToCartBtn = document.createElement('button');
      addToCartBtn.className = 'btn btn-success btn-sm mt-2';
      addToCartBtn.textContent = 'Add to Cart';
      addToCartBtn.addEventListener('click', () => {
        alert(`${p.name} has been added to your cart!`);
      });

      cardBody.appendChild(cardTitle);
      cardBody.appendChild(cardText);
      cardBody.appendChild(addToCartBtn);

      card.appendChild(img);
      card.appendChild(cardBody);

      col.appendChild(card);
      productListEl.appendChild(col);
    });
  }

  // Handle category clicks in navbar
  document.querySelectorAll('.category-link').forEach(link => {
    link.addEventListener('click', e => {
      e.preventDefault();
      selectedCategory = e.target.getAttribute('data-category');
      updateBreadcrumb();
      renderProducts();
    });
  });

  // Handle pending brand filter changes
  document.querySelectorAll('.brand-filter').forEach(chk => {
    chk.addEventListener('change', e => {
      const brand = e.target.value;
      if (e.target.checked) {
        pendingBrands.add(brand);
      } else {
        pendingBrands.delete(brand);
      }
    });
  });

  // Handle pending price range filter changes
  document.querySelectorAll('.price-filter').forEach(radio => {
    radio.addEventListener('change', e => {
      pendingPriceRange = e.target.value;
    });
  });

  // Apply filters
  applyFiltersBtn.addEventListener('click', () => {
    selectedBrands = pendingBrands.size > 0 ? new Set(pendingBrands) : null;
    selectedPriceRange = pendingPriceRange !== 'all' ? pendingPriceRange : null;
    renderProducts();
  });

  // Reset filters
  resetFiltersBtn.addEventListener('click', () => {
    document.querySelectorAll('.brand-filter').forEach(chk => {
      chk.checked = false;
      pendingBrands.delete(chk.value);
    });
    selectedBrands = null;
    document.getElementById('priceAll').checked = true;
    pendingPriceRange = 'all';
    selectedPriceRange = null;
    renderProducts();
  });

  // Initial load: no filters, no category
  updateBreadcrumb();
  renderProducts();

  // Dropdown submenu support for Bootstrap 5
  document.querySelectorAll('.dropdown-submenu > a').forEach(function(element){
    element.addEventListener('mouseenter', function(e){
      const submenu = this.nextElementSibling;
      if(submenu){
        bootstrap.Dropdown.getOrCreateInstance(submenu).show();
      }
    });
    element.addEventListener('click', function(e){
      e.preventDefault();
      e.stopPropagation();
      const submenu = this.nextElementSibling;
      if(submenu){
        if(submenu.classList.contains('show')){
          bootstrap.Dropdown.getOrCreateInstance(submenu).hide();
        } else {
          bootstrap.Dropdown.getOrCreateInstance(submenu).show();
        }
      }
    });
  });
</script>

</body>
</html>